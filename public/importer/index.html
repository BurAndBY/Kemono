<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Kemono</title>
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/normalize.css@8.0.1/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
  </head>
  <body>
    <div class="main">
      <ul class="header">
        <li><a href="/artists">Artists</a></li>
        <li><a href="/posts">Posts</a></li>
        <li class="current-page"><a href="/importer">Import</a></li>
        <li><a href="/board">Board</a></li>
        <li><a href="/help">Help</a></li>
        <li><a href="https://liberapay.com/kemono.party" target="_blank">Donate</a></li>
      </ul>
      <ul class="subheader">
        <li><a href="/importer">List</a></li>
      </ul>
      <div class="views">
        <div class="sidebar" style="margin-right: 10px;">
          <h1>Import Index</h1>
          <div class="results" id="results">
            <li>
              <a href="">» Import from paysite</a>
            </li>
            <li>
              <a href="./yiff">» Import from yiff.party</a>
            </li>
            <li>
              <a href="./tutorial">» How to get your session key</a>
            </li>
          </div>
        </div>
        <div class="page" id="page">
          <h1>Import from paysite</h1>
          <form
            class="importer-form"
            action="/api/import"
            enctype="application/x-www-form-urlencoded"
            method="post"
          >
            <select id="service" name="service">
              <option value="patreon" selected>Patreon</option>
              <option value="fanbox">Pixiv Fanbox</option>
              <option value="gumroad">Gumroad</option>
              <option value="subscribestar">SubscribeStar</option>
              <option value="discord">Discord</option>
              <option value="dlsite">DLsite English</option>
              <option value="dlsite-jp">DLsite Japan</option>
            </select>
            <input 
              type="text"
              name="session_key"
              placeholder="session key"
              autocomplete="off" 
              autocorrect="off" 
              autocapitalize="off" 
              spellcheck="false"
              required
            >
            <input 
              type="text"
              id="channel_ids"
              name="channel_ids"
              placeholder="discord channel ids (comma separated, no spaces)"
              autocomplete="off" 
              autocorrect="off" 
              autocapitalize="off" 
              spellcheck="false"
            >
            <input type="submit"/>
          </form>
          <p>
            <a href="./tutorial.html">Learn how to get your session key.</a><br>
            Make sure you are familiar with <a href="/help/rules">the rules</a> before importing.
            <h2>Important information</h2>
            Your session key is used to scrape paid posts from your feed. After downloading missing posts, the key is immediately discarded and never stored.
            <h3>DLsite</h3>
            <ul>
              <li>The English and Japanese versions of DLsite are separate, and have different APIs and login systems. Make sure to select the right one!</li>
              <li>As of right now, the importer is unable to crack DRM-protected works from DLsite (anything with the extensions .dlst or .cpd)</li>
              <li>DLsite has a short token expiration period, only lasting for about a day. If your import fails or has issues, try getting a new token by logging out and back in.</li>
            </ul>
            If you're having trouble with the importer, contact admin. 
          </p>
        </div>
      </div>
    </div>
    <script src="/js/importer.js"></script>
  </body>
</html>